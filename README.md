# بوت التليجرام للدعم والتفعيل

هذا البوت مخصص لإدارة تفعيل حسابات المستخدمين في نظام الاختبارات الإلكترونية.

## المميزات

- **للمستخدمين العاديين:**
  - التحقق من حالة التفعيل
  - طلب الدعم

- **للأدمن:**
  - عرض المستخدمين غير المفعلين
  - تفعيل/إلغاء تفعيل المستخدمين
  - عرض الإحصائيات
  - إرسال إشعارات تلقائية للمستخدمين عند التفعيل

## التثبيت والإعداد

### 1. تثبيت المتطلبات

```bash
pip install -r requirements.txt
```

### 2. إعداد المتغيرات البيئية

انسخ ملف `.env.example` إلى `.env` وقم بتعديل القيم:

```bash
cp .env.example .env
```

قم بتعديل الملف `.env`:

```env
BOT_TOKEN=your_bot_token_here
SUPABASE_URL=https://hobpdncvzadvjlbfdfch.supabase.co
SUPABASE_KEY=your_supabase_anon_key
ADMIN_USER_ID=your_admin_telegram_id
```

### 3. الحصول على Bot Token

1. ابحث عن `@BotFather` في التليجرام
2. أرسل `/newbot`
3. اتبع التعليمات لإنشاء البوت
4. احفظ الـ Token المُعطى

### 4. الحصول على معرف الأدمن

1. ابحث عن `@userinfobot` في التليجرام
2. أرسل `/start`
3. احفظ الـ User ID الخاص بك

### 5. تشغيل البوت

```bash
python bot.py
```

## الأوامر المتاحة

### للمستخدمين العاديين:
- `/start` - التحقق من حالة الحساب

### للأدمن:
- `/admin` - فتح لوحة تحكم الأدمن

## لوحة تحكم الأدمن

تتضمن الخيارات التالية:

1. **عرض المستخدمين غير المفعلين**: قائمة بجميع المستخدمين الذين يحتاجون تفعيل
2. **عرض جميع المستخدمين**: قائمة شاملة بجميع المستخدمين وحالة تفعيلهم
3. **الإحصائيات**: عرض إحصائيات النظام

## النشر على Render

### 1. إنشاء حساب على Render

انتقل إلى [render.com](https://render.com) وأنشئ حساباً جديداً.

### 2. ربط المستودع

1. اضغط على "New +"
2. اختر "Web Service"
3. اربط حساب GitHub الخاص بك
4. اختر المستودع الذي يحتوي على البوت

### 3. إعداد الخدمة

- **Name**: telegram-support-bot
- **Environment**: Python 3
- **Build Command**: `pip install -r requirements.txt`
- **Start Command**: `python bot.py`

### 4. إضافة المتغيرات البيئية

في قسم "Environment Variables" أضف:

- `BOT_TOKEN`: التوكن الخاص بالبوت
- `SUPABASE_URL`: رابط Supabase
- `SUPABASE_KEY`: مفتاح Supabase
- `ADMIN_USER_ID`: معرف الأدمن

### 5. النشر

اضغط على "Create Web Service" وانتظر حتى يكتمل النشر.

## الأمان

- لا تشارك الـ Bot Token مع أي شخص
- تأكد من أن معرف الأدمن صحيح
- استخدم HTTPS دائماً في الإنتاج
- راجع صلاحيات قاعدة البيانات بانتظام

## استكشاف الأخطاء

### البوت لا يرد:
- تحقق من صحة الـ Bot Token
- تأكد من أن البوت يعمل
- راجع سجلات الأخطاء

### مشاكل قاعدة البيانات:
- تحقق من صحة بيانات Supabase
- تأكد من وجود الجداول المطلوبة
- راجع صلاحيات قاعدة البيانات

### مشاكل الصلاحيات:
- تأكد من صحة معرف الأدمن
- تحقق من أن المستخدم لديه صلاحيات الأدمن

## الدعم

للحصول على المساعدة، يرجى مراجعة الوثائق أو التواصل مع فريق التطوير.

